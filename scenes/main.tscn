[gd_scene load_steps=25 format=3 uid="uid://dop85vkr3mb2g"]

[ext_resource type="PackedScene" uid="uid://cooagrp6vnti7" path="res://scenes/boulder.tscn" id="1_8lew4"]
[ext_resource type="Script" path="res://gdj/me/gabryon/kodeedelivery/managers/Referee.gdj" id="1_xu7tv"]
[ext_resource type="PackedScene" uid="uid://chg68bxe8gyhx" path="res://scenes/world.tscn" id="2_g3d4t"]
[ext_resource type="Script" path="res://gdj/me/gabryon/kodeedelivery/managers/ComboManager.gdj" id="2_l4xqi"]
[ext_resource type="Script" path="res://gdj/me/gabryon/kodeedelivery/managers/LevelManager.gdj" id="3_kn65t"]
[ext_resource type="PackedScene" uid="uid://q5y5t5qtww7w" path="res://scenes/bottom_mailbox_orbit_point.tscn" id="4_la7fi"]
[ext_resource type="Script" path="res://gdj/me/gabryon/kodeedelivery/managers/ScoreManager.gdj" id="4_r8rnm"]
[ext_resource type="PackedScene" uid="uid://ntp6wvus8jab" path="res://scenes/kodee.tscn" id="4_vf74w"]
[ext_resource type="PackedScene" uid="uid://dbe4dmfsf0v08" path="res://scenes/top_mailbox_orbit_point.tscn" id="5_0x125"]
[ext_resource type="AudioStream" uid="uid://cjelikokby2u8" path="res://assets/sounds/levelup.mp3" id="7_ay1vm"]
[ext_resource type="Texture2D" uid="uid://bbel3f6t11itc" path="res://assets/official/Ground.png" id="8_c5mtw"]
[ext_resource type="Texture2D" uid="uid://d2sn5ijwbp2mr" path="res://assets/official/newsky.png" id="9_mkdj2"]
[ext_resource type="FontFile" uid="uid://7slmtb1nnrru" path="res://assets/JetBrainsMono[wght].ttf" id="11_ssjco"]
[ext_resource type="PackedScene" uid="uid://c5wovbmagubj6" path="res://scenes/cloud.tscn" id="12_8rbqv"]
[ext_resource type="Script" path="res://gdj/me/gabryon/kodeedelivery/ui/HUD.gdj" id="12_s6m8c"]
[ext_resource type="FontFile" uid="uid://dktik3u7nkjc" path="res://assets/JetBrains Sans.ttf" id="13_68qtp"]
[ext_resource type="Texture2D" uid="uid://dg4nfbfqhx8in" path="res://assets/official/houses.png" id="13_veux7"]
[ext_resource type="AudioStream" uid="uid://df7o47rc47knp" path="res://assets/sounds/chase.wav" id="17_h1rbj"]

[sub_resource type="Theme" id="Theme_usj2q"]
default_base_scale = 0.19
default_font = ExtResource("11_ssjco")

[sub_resource type="LabelSettings" id="LabelSettings_2f3ec"]
font = ExtResource("13_68qtp")
font_size = 116
outline_size = 16
outline_color = Color(0, 0, 0, 1)

[sub_resource type="LabelSettings" id="LabelSettings_uotrs"]
font = ExtResource("11_ssjco")
font_size = 64
outline_size = 10
outline_color = Color(0, 0, 0, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_15ggv"]
albedo_texture = ExtResource("8_c5mtw")
metallic_specular = 0.45
emission_enabled = true
emission = Color(0.564706, 0.2, 0.239216, 1)
emission_energy_multiplier = 0.1
normal_scale = -9.51
uv1_scale = Vector3(3, 1, 1)

[sub_resource type="Environment" id="Environment_bf6mb"]
background_mode = 3
background_color = Color(1, 1, 1, 1)
ambient_light_color = Color(1, 1, 1, 1)
sdfgi_enabled = true
sdfgi_use_occlusion = true

[sub_resource type="CameraAttributesPractical" id="CameraAttributesPractical_ma8t6"]

[node name="Main" type="Node3D"]

[node name="Referee" type="Node" parent="." node_paths=PackedStringArray("kodee_orbit_point", "dog_orbit_point", "distance_bar", "kodee_script", "dog_script")]
unique_name_in_owner = true
script = ExtResource("1_xu7tv")
kodee_orbit_point = NodePath("../World/KodeeOrbitPoint")
dog_orbit_point = NodePath("../World/DogOrbitPoint")
max_distance_dog_and_kodee = 1.7
distance_bar = NodePath("../HUD/DistanceBar")
bounciness = 2.0
min_max_speed_dog = -2.0
overtake_speed = -0.065
kodee_script = NodePath("../World/KodeeOrbitPoint/Kodee")
dog_script = NodePath("../World/DogOrbitPoint/Dog")

[node name="ComboManager" type="Node" parent="." node_paths=PackedStringArray("kodee")]
unique_name_in_owner = true
script = ExtResource("2_l4xqi")
kodee = NodePath("../World/KodeeOrbitPoint/Kodee")

[node name="LevelManager" type="Node" parent="." node_paths=PackedStringArray("score_manager", "world", "kodee", "dog")]
unique_name_in_owner = true
script = ExtResource("3_kn65t")
score_manager = NodePath("../ScoreManager")
bottom_mailbox = ExtResource("4_la7fi")
top_mailbox = ExtResource("5_0x125")
world = NodePath("../World")
kodee = NodePath("../World/KodeeOrbitPoint/Kodee")
dog = NodePath("../World/DogOrbitPoint/Dog")

[node name="NextLevelSound" type="AudioStreamPlayer3D" parent="LevelManager"]
stream = ExtResource("7_ay1vm")

[node name="ScoreManager" type="Node" parent="." node_paths=PackedStringArray("level_manager", "combo_manager")]
unique_name_in_owner = true
script = ExtResource("4_r8rnm")
level_manager = NodePath("../LevelManager")
combo_manager = NodePath("../ComboManager")

[node name="Background" type="Node2D" parent="."]

[node name="Cloud(1)" parent="Background" instance=ExtResource("12_8rbqv")]
position = Vector2(587, 93)

[node name="Cloud" parent="Background" instance=ExtResource("12_8rbqv")]
position = Vector2(168, 198)
scale = Vector2(0.25, 0.25)

[node name="Cloud(1)2" parent="Background" instance=ExtResource("12_8rbqv")]
position = Vector2(112, 404)

[node name="Cloud2" parent="Background" instance=ExtResource("12_8rbqv")]
position = Vector2(607, 504)
scale = Vector2(0.25, 0.25)

[node name="Houses" type="Sprite2D" parent="Background"]
position = Vector2(361.406, 796)
scale = Vector2(0.496783, 0.449985)
texture = ExtResource("13_veux7")

[node name="Sky" type="Sprite2D" parent="Background"]
z_index = -10
z_as_relative = false
position = Vector2(360, 640)
scale = Vector2(0.5, 0.5)
texture = ExtResource("9_mkdj2")

[node name="HUD" type="VBoxContainer" parent="." node_paths=PackedStringArray("score_manager", "level_manager", "score_label", "level_label")]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = 206.0
offset_bottom = -817.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("12_s6m8c")
score_manager = NodePath("../ScoreManager")
level_manager = NodePath("../LevelManager")
score_label = NodePath("MarginContainer/CenterContainer/ScoreLabel")
level_label = NodePath("CenterContainer2/LevelLabel")

[node name="DistanceBar" type="ProgressBar" parent="HUD"]
layout_mode = 2
value = 50.0
rounded = true

[node name="MarginContainer" type="MarginContainer" parent="HUD"]
layout_mode = 2
theme = SubResource("Theme_usj2q")

[node name="CenterContainer" type="CenterContainer" parent="HUD/MarginContainer"]
layout_mode = 2

[node name="ScoreLabel" type="Label" parent="HUD/MarginContainer/CenterContainer"]
layout_mode = 2
text = "000"
label_settings = SubResource("LabelSettings_2f3ec")

[node name="CenterContainer2" type="CenterContainer" parent="HUD"]
layout_mode = 2

[node name="LevelLabel" type="Label" parent="HUD/CenterContainer2"]
modulate = Color(1, 1, 1, 0)
layout_mode = 2
text = "Next Level!"
label_settings = SubResource("LabelSettings_uotrs")

[node name="World" parent="." instance=ExtResource("2_g3d4t")]
height = 2.40587
sides = 64
material = SubResource("StandardMaterial3D_15ggv")

[node name="DogOrbitPoint" type="Node3D" parent="World"]
transform = Transform3D(-6.77365e-09, -0.44221, 0.896911, -1, 3.71539e-09, -5.72037e-09, -8.02767e-10, -0.896911, -0.44221, 0, 0, 0)

[node name="Dog" parent="World/DogOrbitPoint" instance=ExtResource("1_8lew4")]
unique_name_in_owner = true
transform = Transform3D(0.7, -1.17999e-08, -4.85304e-08, -4.85304e-08, -0.321402, -0.621852, -1.18e-08, 0.621852, -0.321402, 9.29596e-10, 0.169766, 0.856863)
rotation_speed = Vector3(0, 90, 0)
angular_speed = -1.0
initial_angular_speed = -1.0
maximum_angular_speed = -2.5

[node name="KodeeOrbitPoint" type="Node3D" parent="World"]
unique_name_in_owner = true
transform = Transform3D(-2.80971e-08, 0.642788, 0.766044, -1, -4.37114e-08, 2.24196e-16, 3.34849e-08, -0.766044, 0.642788, 0, 2.08189e-12, 0)

[node name="Up_mvp" type="CSGSphere3D" parent="World/KodeeOrbitPoint"]
transform = Transform3D(0.025, -1.09518e-16, -1.55331e-16, -4.10608e-16, 0.0250001, -5.68443e-09, 3.22753e-16, 1.21468e-09, 0.0250001, 9.32331e-09, -0.213245, 1.77893)
visible = false

[node name="Left_mvp" type="CSGSphere3D" parent="World/KodeeOrbitPoint"]
transform = Transform3D(0.025, -4.38911e-16, -1.1099e-16, -8.6966e-17, 0.025, -3.73703e-09, 3.10877e-16, 9.43308e-10, 0.025, -0.35, -0.069, 0.646)
visible = false

[node name="Center_mvp" type="CSGSphere3D" parent="World/KodeeOrbitPoint"]
transform = Transform3D(0.025, -3.27889e-16, -5.54793e-17, -4.4442e-17, 0.025, -5.59968e-09, 2.19684e-16, 9.43308e-10, 0.025, 2.081e-12, -0.0689999, 0.646)
visible = false

[node name="Right_mvp" type="CSGSphere3D" parent="World/KodeeOrbitPoint"]
transform = Transform3D(0.025, -3.27889e-16, -6.82744e-18, -1.91803e-18, 0.025, -4.17281e-09, 1.84002e-16, 9.43308e-10, 0.025, 0.35, -0.069, 0.646)
visible = false

[node name="Kodee" parent="World/KodeeOrbitPoint" node_paths=PackedStringArray("up_move_point", "down_move_point", "left_move_point", "center_move_point", "right_move_point") instance=ExtResource("4_vf74w")]
unique_name_in_owner = true
transform = Transform3D(1, 7.59201e-15, -4.01812e-14, -6.69116e-15, 1, 2.4751e-08, 7.70875e-15, -5.80578e-08, 1, 2.61271e-09, -0.0686511, 0.645952)
up_move_point = NodePath("../Up_mvp")
down_move_point = NodePath("../Center_mvp")
left_move_point = NodePath("../Left_mvp")
center_move_point = NodePath("../Center_mvp")
right_move_point = NodePath("../Right_mvp")
angular_speed = -1.0
initial_angular_speed = -1.0
maximum_angular_speed = -2.5

[node name="Light" type="OmniLight3D" parent="World/KodeeOrbitPoint"]
transform = Transform3D(1, 1.56142e-08, 3.34848e-08, 1.56142e-08, 0.642788, -0.766044, -3.34849e-08, 0.766044, 0.642788, 1.24888e-07, -1.04776, 3.24111)
light_energy = 6.0
light_indirect_energy = 0.0

[node name="Camera" type="Camera3D" parent="World/KodeeOrbitPoint"]
transform = Transform3D(1, -8.3749e-14, -8.19357e-15, -6.69116e-15, 0.173648, -0.984808, 7.70875e-15, 0.984808, 0.173648, -0.0367592, -1.30728, 1.79441)
current = true
fov = 90.0

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_bf6mb")
camera_attributes = SubResource("CameraAttributesPractical_ma8t6")

[node name="BgMusic" type="AudioStreamPlayer3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.000140607, -7.29561e-05, 0.00466967)
stream = ExtResource("17_h1rbj")
volume_db = -10.0
autoplay = true
